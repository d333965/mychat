import{_ as w,b as y,o as u,c as h,F as b,r as z,f as r,t as $,n as C,i as A,d as U,j as B,p as H,k as K,l as Q,e as i,a as e,h as s,m as I,w as X,v as Y,u as g,q as N,s as Z,E as ee,x as te,y as oe,z as S,A as se}from"./index-CLGD-T07.js";import{e as M,b as O,a as E,u as ne,_ as ae,c as le,d as P,s as ce,h as re}from"./footbar-BcAQvDMG.js";const ie={class:"headbar"},de=["onClick"],_e={__name:"headbar",setup(v){const n=["文生图","图生图","图生视频"],a=y(0);return(o,l)=>(u(),h("div",ie,[(u(),h(b,null,z(n,(c,t)=>r("span",{key:t,class:C({active:a.value===t}),onClick:d=>a.value=t},$(c),11,de)),64))]))}},T=w(_e,[["__scopeId","data-v-11224aa9"]]),pe=v=>(H("data-v-85df5fcb"),v=v(),K(),v),ue=pe(()=>r("div",{class:"title"},"图片尺寸",-1)),me={class:"size-options"},fe=["onClick"],ge={class:"size-box"},ve={class:"size-label"},he={style:{color:"#d5d5d5","font-size":"14px"}},xe={__name:"img_size",setup(v){const n=M(),a=[{ratio:"1:1",label:"1:1",size:"1024x1024"},{ratio:"4:3",label:"4:3",size:"1024x768"},{ratio:"3:4",label:"3:4",size:"768x1024"},{ratio:"16:9",label:"16:9",size:"1024x576"},{ratio:"9:16",label:"9:16",size:"576x1024"}],o=y(n.imgSize),l=A(()=>n.prompt.img_size),c=(d,_)=>{o.value=d,n.setImgSize(_)};U(()=>{n.initStore(),t()});function t(){const d=a.find(_=>_.size===n.imgSize);d&&(o.value=d.ratio)}return B(()=>n.imgSize,d=>{t()}),(d,_)=>(u(),h("div",null,[ue,r("div",me,[(u(),h(b,null,z(a,(p,f)=>r("div",{key:f,class:"size-option"},[r("div",{class:C(["size-selector",{selected:o.value===p.ratio}]),onClick:x=>c(p.ratio,p.size)},[r("div",ge,[r("div",{class:C(["size-outline",`aspect-${p.ratio.replace(":","-")}`])},null,2)]),r("span",ve,$(p.label),1)],10,fe)])),64))]),r("div",he,"当前图片尺寸: "+$(l.value),1)]))}},be=w(xe,[["__scopeId","data-v-85df5fcb"]]),ye={class:"style-label"},we={class:"textarea-container"},Se={__name:"selections",setup(v){const n=M(),a={风格:["动漫","现实","赛博朋克","星际","日本漫画","水墨画风格","原创","风景画","插画","漫画","现代自然"],视角:["正面","侧面","背面","俯视","仰视","斜视","鸟瞰","虫视","局部","远方观察"],镜头:["近景","中景","远景","广角","微距","长焦","鱼眼","全景","特写","移动拍摄","定格"],灯光:["强光","弱光","无光","柔光","逆光","侧光","顶光","底光","散射光","聚光"],"色调/色彩":["冷色调","暖色调","黑白","高饱和度","低饱和度","单色","多彩","复古色调","霓虹色"],背景:["简约","复杂","空白","风景","城市","宇宙","科技风","自然风光","虚幻","未来城市","古代建筑","无背景"]},o=Q(Object.fromEntries(Object.keys(a).map(l=>[l,""])));return B(()=>({...o}),l=>{n.setPrompt({style:l.风格,view:l.视角,lens:l.镜头,light:l.灯光,color:l["色调/色彩"],background:l.背景})},{deep:!0}),(l,c)=>{const t=i("el-option"),d=i("el-select");return u(),h(b,null,[(u(),h(b,null,z(a,(_,p)=>r("div",{key:p,class:"style-selection"},[r("span",ye,$(p),1),e(d,{modelValue:o[p],"onUpdate:modelValue":f=>o[p]=f,clearable:"",placeholder:"可选",size:"small"},{default:s(()=>[(u(!0),h(b,null,z(_,f=>(u(),I(t,{key:f,label:f,value:f},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64)),r("div",we,[X(r("textarea",{placeholder:"输入提示词(必填)",class:"inputstyle","onUpdate:modelValue":c[0]||(c[0]=_=>g(n).prompt.prompt.context=_)},null,512),[[Y,g(n).prompt.prompt.context]])])],64)}}},ze=w(Se,[["__scopeId","data-v-b6c2db36"]]),F={__name:"Text_to_Image",setup(v){return(n,a)=>(u(),h(b,null,[r("div",null,[e(be)]),r("div",null,[e(ze)])],64))}},$e={__name:"generateButton",emits:["draw"],setup(v,{emit:n}){const a=O(),o=M(),l=n,c=()=>{if(o.prompt.prompt.context){const t=JSON.stringify(o.prompt);a.setUser(t),console.log(t),a.sendMessage(!1),l("draw"),o.prompt.prompt.context="",o.setDrawer(!1)}};return(t,d)=>{const _=i("Promotion"),p=i("el-icon"),f=i("el-button");return u(),I(f,{type:g(o).prompt.prompt.context?"success":"",class:C(["generate-button",{disabled:!g(o).prompt.prompt.context}]),onClick:c,disabled:!g(o).prompt.prompt.context},{default:s(()=>[e(p,{style:{"font-size":"18px","margin-right":"5px"}},{default:s(()=>[e(_)]),_:1}),N("生成 ")]),_:1},8,["type","class","disabled"])}}},L=w($e,[["__scopeId","data-v-ad193a5f"]]),Ie={__name:"model_settings",setup(v){const n=M(),a=y("btt"),o=y(550);return(l,c)=>{const t=i("el-header"),d=i("el-main"),_=i("el-footer"),p=i("el-container"),f=i("el-drawer");return u(),I(f,{modelValue:g(n).drawer,"onUpdate:modelValue":c[0]||(c[0]=x=>g(n).drawer=x),direction:a.value,size:o.value,"with-header":!1},{default:s(()=>[e(p,null,{default:s(()=>[e(t,{style:{display:"flex","justify-content":"center",padding:"0"}},{default:s(()=>[e(T)]),_:1}),e(d,{style:{display:"flex","flex-direction":"column",padding:"0 10px 0 10px","margin-top":"10px"}},{default:s(()=>[e(F)]),_:1}),e(_,{style:{padding:"10px",height:"40px"}},{default:s(()=>[e(L)]),_:1})]),_:1})]),_:1},8,["modelValue","direction","size"])}}},ke={__name:"pc_settings",setup(v){return(n,a)=>{const o=i("el-header"),l=i("el-main"),c=i("el-footer"),t=i("el-container");return u(),I(t,null,{default:s(()=>[e(o,{style:{display:"flex","justify-content":"center",padding:"0"}},{default:s(()=>[e(T)]),_:1}),e(l,{style:{display:"flex","flex-direction":"column","margin-top":"10px"}},{default:s(()=>[e(F)]),_:1}),e(c,{style:{padding:"10px",height:"40px"}},{default:s(()=>[e(L)]),_:1})]),_:1})}}},Ce={class:"assistant-container"},Me=["src"],De=["src"],Ve={class:"percentage-value"},Ae=r("span",{class:"percentage-label"},"生成图片中...",-1),Ue={style:{margin:"0"}},Ee=r("span",null,"复制",-1),Pe=r("span",null,"下载",-1),je={__name:"assistant",props:{content:String,index:Number},emits:["deleteMessage"],setup(v,{emit:n}){const a=E(),o=v,l=y(null),c=A(()=>{try{return JSON.parse(o.content).images[0].url}catch(m){return console.error("解析内容失败:",m),null}}),t=y(0);let d;const _=()=>{if(c.value){const m=document.createElement("a");m.href=c.value,m.download="generated_image.png",document.body.appendChild(m),m.click(),document.body.removeChild(m),S.success("图片下载已开始")}else S.error("无法下载图片")},p=n,f=()=>{p("deleteMessage",o.index)},x=()=>{if(c.value){const m=document.createElement("textarea");m.value=c.value,document.body.appendChild(m),m.select();try{document.execCommand("copy"),S.success("图片链接已复制到剪贴板")}catch{S.error("复制失败，请手动复制")}finally{document.body.removeChild(m)}}else S.error("无法复制图片链接")};U(()=>{c.value||D()}),Z(()=>{clearInterval(d)});const D=()=>{t.value=0,d=setInterval(()=>{t.value<100?t.value+=1:clearInterval(d)},100)};return(m,V)=>{const J=i("Delete"),k=i("el-icon"),R=i("MoreFilled"),q=i("el-popover"),G=i("el-card");return u(),h("div",Ce,[r("img",{src:g(a).AIphoto,alt:"assistant",class:"assistantImg"},null,8,Me),e(G,{class:"assistantCard"},{default:s(()=>[r("div",{ref_key:"contentRef",ref:l,class:"content-body"},[c.value?(u(),h("img",{key:0,src:c.value,alt:"生成的图片",class:"generated-image"},null,8,De)):(u(),I(g(ee),{key:1,type:"circle",percentage:t.value,width:120},{default:s(({percentage:W})=>[r("span",Ve,$(10-Math.floor(W/10))+"s",1),Ae]),_:1},8,["percentage"]))],512),e(q,{placement:"right-end",trigger:"click","popper-class":"custom-popover"},{reference:s(()=>[e(k,{class:"MoreFilled"},{default:s(()=>[e(R)]),_:1})]),default:s(()=>[r("div",Ue,[r("p",{class:"custom-p",onClick:f},[e(k,{style:{width:"20px",margin:"6px"}},{default:s(()=>[e(J)]),_:1}),N(" 删除 ")]),r("p",{class:"custom-p",onClick:x},[e(k,{style:{width:"20px",margin:"6px"}},{default:s(()=>[e(g(te))]),_:1}),Ee]),r("p",{class:"custom-p",onClick:_},[e(k,{style:{width:"20px",margin:"6px"}},{default:s(()=>[e(g(oe))]),_:1}),Pe])])]),_:1})]),_:1})])}}},Be={__name:"mainPart",setup(v){const{chatContainer:n,handleScroll:a}=ne(),o=E(),l=O(),c=t=>{l.messageList.splice(t,1)};return(t,d)=>(u(),h("div",{class:"chat-container",ref_key:"chatContainer",ref:n,onScroll:d[0]||(d[0]=(..._)=>g(a)&&g(a)(..._))},[e(ae,{content:g(o).prologue},null,8,["content"]),(u(!0),h(b,null,z(g(l).messageList,(_,p)=>(u(),h("div",{key:p},[e(le,{content:_.user},null,8,["content"]),e(je,{content:_.assistant,index:p,onDeleteMessage:c},null,8,["content","index"])]))),128))],544))}},j=w(Be,[["__scopeId","data-v-ef31167b"]]),Ne={class:"common-layout"},Oe={__name:"draw",setup(v){const n=E(),a=y(!1),o=A(()=>window.innerWidth<=768?"70%":"300px");function l(){a.value=!a.value}function c(){console.log("开始绘图")}return U(async()=>{const t=await se.get("/api/Draw/");n.setAImodel(t.data[0].title),n.setAIphoto(t.data[0].img),n.setUrl(t.data[0].url),n.setprologue(t.data[0].prologue)}),window.addEventListener("resize",()=>{o.value=o.value}),(t,d)=>{const _=i("el-aside"),p=i("el-drawer"),f=i("el-header"),x=i("el-main"),D=i("el-footer"),m=i("el-container");return u(),h("div",Ne,[e(m,null,{default:s(()=>[e(_,{class:"menu"},{default:s(()=>[e(P)]),_:1}),e(p,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=V=>a.value=V),direction:"ltr","with-header":!1,class:"sidebar-drawer",size:o.value},{default:s(()=>[e(ce,{onToggleSidebar:l})]),_:1},8,["modelValue","size"]),e(_,{class:"aside"},{default:s(()=>[e(ke)]),_:1}),e(m,null,{default:s(()=>[e(f,{class:"headbar"},{default:s(()=>[e(re,{onToggleSidebar:l})]),_:1}),e(x,{class:"pc_settings"},{default:s(()=>[e(j)]),_:1}),e(x,{class:"model_settings"},{default:s(()=>[e(Ie),e(j)]),_:1}),e(D,{class:"footbar"},{default:s(()=>[e(P,{onDraw:c})]),_:1})]),_:1})]),_:1})])}}},Le=w(Oe,[["__scopeId","data-v-50f10220"]]);export{Le as default};
