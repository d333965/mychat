import{_ as S,b as x,o as u,c as v,F as b,r as w,f as c,t as $,n as M,j as V,d as A,k as j,p as Q,l as W,m as X,e as r,a as e,h as o,q as I,w as B,v as Y,u as f,s as E,x as Z,E as ee,y as te,z as se,A as z,B as oe,T as ne,i as ae}from"./index-DAQo3o-S.js";import{e as D,b as N,a as U,u as le,_ as ce,c as re,d as P,s as ie,h as _e}from"./footbar-BPX2ji4y.js";const de={class:"headbar"},pe=["onClick"],ue={__name:"headbar",setup(g){const n=["文生图","图生图","图生视频"],_=x(0);return(t,a)=>(u(),v("div",de,[(u(),v(b,null,w(n,(l,s)=>c("span",{key:s,class:M({active:_.value===s}),onClick:p=>_.value=s},$(l),11,pe)),64))]))}},O=S(ue,[["__scopeId","data-v-11224aa9"]]),me=g=>(Q("data-v-85df5fcb"),g=g(),W(),g),fe=me(()=>c("div",{class:"title"},"图片尺寸",-1)),ge={class:"size-options"},he=["onClick"],ve={class:"size-box"},xe={class:"size-label"},be={style:{color:"#d5d5d5","font-size":"14px"}},ye={__name:"img_size",setup(g){const n=D(),_=[{ratio:"1:1",label:"1:1",size:"1024x1024"},{ratio:"4:3",label:"4:3",size:"1024x768"},{ratio:"3:4",label:"3:4",size:"768x1024"},{ratio:"16:9",label:"16:9",size:"1024x576"},{ratio:"9:16",label:"9:16",size:"576x1024"}],t=x(n.imgSize),a=V(()=>n.prompt.img_size),l=(p,i)=>{t.value=p,n.setImgSize(i)};A(()=>{n.initStore(),s()});function s(){const p=_.find(i=>i.size===n.imgSize);p&&(t.value=p.ratio)}return j(()=>n.imgSize,p=>{s()}),(p,i)=>(u(),v("div",null,[fe,c("div",ge,[(u(),v(b,null,w(_,(d,m)=>c("div",{key:m,class:"size-option"},[c("div",{class:M(["size-selector",{selected:t.value===d.ratio}]),onClick:y=>l(d.ratio,d.size)},[c("div",ve,[c("div",{class:M(["size-outline",`aspect-${d.ratio.replace(":","-")}`])},null,2)]),c("span",xe,$(d.label),1)],10,he)])),64))]),c("div",be,"当前图片尺寸: "+$(a.value),1)]))}},Se=S(ye,[["__scopeId","data-v-85df5fcb"]]),ze={class:"style-label"},we={class:"textarea-container"},$e={__name:"selections",setup(g){const n=D(),_={风格:["动漫","写真","赛博朋克","星际","日本漫画","水墨画风格","原创","风景画","插画","漫画","现代自然"],视角:["正面","侧面","背面","俯视","仰视","斜视","近景","远景","鸟瞰","虫视","局部","广角"],镜头:["近景","中景","远景","广角","微距","长焦","鱼眼","全景","特写","慢动作","快动作","定格"],灯光:["强光","弱光","无光","柔光","逆光","侧光","顶光","底光","散射光","聚光"],"色调/色彩":["冷色调","暖色调","黑白","高饱和度","低饱和度","单色","多彩","复古色调","霓虹色"],背景:["简约","复杂","空白","风景","城市","宇宙","科技风","自然风光","虚幻","未来城市","古代建筑","无背景"]},t=X(Object.fromEntries(Object.keys(_).map(a=>[a,""])));return j(()=>({...t}),a=>{n.setPrompt({style:a.风格,view:a.视角,lens:a.镜头,light:a.灯光,color:a["色调/色彩"],background:a.背景})},{deep:!0}),(a,l)=>{const s=r("el-option"),p=r("el-select");return u(),v(b,null,[(u(),v(b,null,w(_,(i,d)=>c("div",{key:d,class:"style-selection"},[c("span",ze,$(d),1),e(p,{modelValue:t[d],"onUpdate:modelValue":m=>t[d]=m,clearable:"",placeholder:"可选",size:"small"},{default:o(()=>[(u(!0),v(b,null,w(i,m=>(u(),I(s,{key:m,label:m,value:m},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64)),c("div",we,[B(c("textarea",{placeholder:"输入提示词(必填)",class:"inputstyle","onUpdate:modelValue":l[0]||(l[0]=i=>f(n).prompt.prompt.context=i)},null,512),[[Y,f(n).prompt.prompt.context]])])],64)}}},Ie=S($e,[["__scopeId","data-v-0951dcc8"]]),F={__name:"Text_to_Image",setup(g){return(n,_)=>(u(),v(b,null,[c("div",null,[e(Se)]),c("div",null,[e(Ie)])],64))}},ke={__name:"generateButton",emits:["draw"],setup(g,{emit:n}){const _=N(),t=D(),a=n,l=()=>{if(t.prompt.prompt.context){const s=JSON.stringify(t.prompt);_.setUser(s),console.log(s),_.sendMessage(!1),a("draw"),t.prompt.prompt.context="",t.setDrawer(!1)}};return(s,p)=>{const i=r("Promotion"),d=r("el-icon"),m=r("el-button");return u(),I(m,{type:f(t).prompt.prompt.context?"success":"",class:M(["generate-button",{disabled:!f(t).prompt.prompt.context}]),onClick:l,disabled:!f(t).prompt.prompt.context},{default:o(()=>[e(d,{style:{"font-size":"18px","margin-right":"5px"}},{default:o(()=>[e(i)]),_:1}),E("生成 ")]),_:1},8,["type","class","disabled"])}}},R=S(ke,[["__scopeId","data-v-ad193a5f"]]),Ce={__name:"model_settings",setup(g){const n=D(),_=x("btt"),t=x(550);return(a,l)=>{const s=r("el-header"),p=r("el-main"),i=r("el-footer"),d=r("el-container"),m=r("el-drawer");return u(),I(m,{modelValue:f(n).drawer,"onUpdate:modelValue":l[0]||(l[0]=y=>f(n).drawer=y),direction:_.value,size:t.value,"with-header":!1},{default:o(()=>[e(d,null,{default:o(()=>[e(s,{style:{display:"flex","justify-content":"center",padding:"0"}},{default:o(()=>[e(O)]),_:1}),e(p,{style:{display:"flex","flex-direction":"column",padding:"0 10px 0 10px","margin-top":"10px"}},{default:o(()=>[e(F)]),_:1}),e(i,{style:{padding:"10px",height:"40px"}},{default:o(()=>[e(R)]),_:1})]),_:1})]),_:1},8,["modelValue","direction","size"])}}},Me={__name:"pc_settings",setup(g){return(n,_)=>{const t=r("el-header"),a=r("el-main"),l=r("el-footer"),s=r("el-container");return u(),I(s,null,{default:o(()=>[e(t,{style:{display:"flex","justify-content":"center",padding:"0"}},{default:o(()=>[e(O)]),_:1}),e(a,{style:{display:"flex","flex-direction":"column","margin-top":"10px"}},{default:o(()=>[e(F)]),_:1}),e(l,{style:{padding:"10px",height:"40px"}},{default:o(()=>[e(R)]),_:1})]),_:1})}}},De={class:"assistant-container"},Ae=["src"],Ue=["src"],Pe={class:"percentage-value"},Te=c("span",{class:"percentage-label"},"生成图片中...",-1),Ve={style:{margin:"0"}},je=c("span",null,"复制",-1),Be=c("span",null,"下载",-1),Ee={__name:"assistant",props:{content:String,index:Number},emits:["deleteMessage"],setup(g,{emit:n}){const _=U(),t=g,a=x(null),l=V(()=>{try{return JSON.parse(t.content).images[0].url}catch(h){return console.error("解析内容失败:",h),null}}),s=x(0);let p;const i=()=>{if(l.value){const h=document.createElement("a");h.href=l.value,h.download="generated_image.png",document.body.appendChild(h),h.click(),document.body.removeChild(h),z.success("图片下载已开始")}else z.error("无法下载图片")},d=n,m=()=>{d("deleteMessage",t.index)},y=()=>{if(l.value){const h=document.createElement("textarea");h.value=l.value,document.body.appendChild(h),h.select();try{document.execCommand("copy"),z.success("图片链接已复制到剪贴板")}catch{z.error("复制失败，请手动复制")}finally{document.body.removeChild(h)}}else z.error("无法复制图片链接")};A(()=>{l.value||k()}),Z(()=>{clearInterval(p)});const k=()=>{s.value=0,p=setInterval(()=>{s.value<100?s.value+=1:clearInterval(p)},100)};return(h,L)=>{const J=r("Delete"),C=r("el-icon"),q=r("MoreFilled"),G=r("el-popover"),H=r("el-card");return u(),v("div",De,[c("img",{src:f(_).AIphoto,alt:"assistant",class:"assistantImg"},null,8,Ae),e(H,{class:"assistantCard"},{default:o(()=>[c("div",{ref_key:"contentRef",ref:a,class:"content-body"},[l.value?(u(),v("img",{key:0,src:l.value,alt:"生成的图片",class:"generated-image"},null,8,Ue)):(u(),I(f(ee),{key:1,type:"circle",percentage:s.value,width:120},{default:o(({percentage:K})=>[c("span",Pe,$(10-Math.floor(K/10))+"s",1),Te]),_:1},8,["percentage"]))],512),e(G,{placement:"right-end",trigger:"click","popper-class":"custom-popover"},{reference:o(()=>[e(C,{class:"MoreFilled"},{default:o(()=>[e(q)]),_:1})]),default:o(()=>[c("div",Ve,[c("p",{class:"custom-p",onClick:m},[e(C,{style:{width:"20px",margin:"6px"}},{default:o(()=>[e(J)]),_:1}),E(" 删除 ")]),c("p",{class:"custom-p",onClick:y},[e(C,{style:{width:"20px",margin:"6px"}},{default:o(()=>[e(f(te))]),_:1}),je]),c("p",{class:"custom-p",onClick:i},[e(C,{style:{width:"20px",margin:"6px"}},{default:o(()=>[e(f(se))]),_:1}),Be])])]),_:1})]),_:1})])}}},Ne={__name:"mainPart",setup(g){const{chatContainer:n,handleScroll:_}=le(),t=U(),a=N(),l=s=>{a.messageList.splice(s,1)};return(s,p)=>(u(),v("div",{class:"chat-container",ref_key:"chatContainer",ref:n,onScroll:p[0]||(p[0]=(...i)=>f(_)&&f(_)(...i))},[e(ce,{content:f(t).prologue},null,8,["content"]),(u(!0),v(b,null,w(f(a).messageList,(i,d)=>(u(),v("div",{key:d},[e(re,{content:i.user},null,8,["content"]),e(Ee,{content:i.assistant,index:d,onDeleteMessage:l},null,8,["content","index"])]))),128))],544))}},T=S(Ne,[["__scopeId","data-v-ef31167b"]]),Oe={class:"common-layout"},Fe={__name:"draw",setup(g){const n=x(!1),_=x(null),t=U();function a(){n.value=!n.value}function l(){console.log("开始绘图")}return A(async()=>{const s=await oe.get("/api/Draw/");t.setAImodel(s.data[0].title),t.setAIphoto(s.data[0].img),t.setUrl(s.data[0].url),t.setprologue(s.data[0].prologue)}),(s,p)=>{const i=r("el-aside"),d=r("el-header"),m=r("el-main"),y=r("el-footer"),k=r("el-container");return u(),v("div",Oe,[e(k,null,{default:o(()=>[e(i,{class:"menu"},{default:o(()=>[e(P)]),_:1}),e(i,{class:"aside"},{default:o(()=>[e(Me)]),_:1}),e(ne,{name:"slide-fade"},{default:o(()=>[B(e(i,{class:"sidebar",ref_key:"sidebarRef",ref:_},{default:o(()=>[e(ie,{onToggleSidebar:a})]),_:1},512),[[ae,n.value]])]),_:1}),e(k,null,{default:o(()=>[e(d,{class:"headbar"},{default:o(()=>[e(_e,{onToggleSidebar:a})]),_:1}),e(m,{class:"pc_settings"},{default:o(()=>[e(T)]),_:1}),e(m,{class:"model_settings"},{default:o(()=>[e(Ce),e(T)]),_:1}),e(y,{class:"footbar"},{default:o(()=>[e(P,{onDraw:l})]),_:1})]),_:1})]),_:1})])}}},Je=S(Fe,[["__scopeId","data-v-18e7f7b5"]]);export{Je as default};
