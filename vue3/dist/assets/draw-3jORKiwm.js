import{_ as S,b as x,o as u,c as h,F as b,r as z,f as i,t as w,n as I,j as V,d as M,k as j,p as H,l as K,m as Q,e as l,a as e,h as o,q as $,w as T,v as W,u as g,s as B,x as X,E as Y,y as Z,z as A,A as ee,T as te,i as se}from"./index-BWDqJDQ-.js";import{e as k,b as E,a as D,u as oe,_ as ne,c as ae,d as P,s as le,h as ce}from"./footbar-BJ10_eRb.js";const re={class:"headbar"},ie=["onClick"],_e={__name:"headbar",setup(f){const n=["文生图","图生图","图生视频"],_=x(0);return(t,a)=>(u(),h("div",re,[(u(),h(b,null,z(n,(c,s)=>i("span",{key:s,class:I({active:_.value===s}),onClick:p=>_.value=s},w(c),11,ie)),64))]))}},N=S(_e,[["__scopeId","data-v-11224aa9"]]),de=f=>(H("data-v-85df5fcb"),f=f(),K(),f),pe=de(()=>i("div",{class:"title"},"图片尺寸",-1)),ue={class:"size-options"},me=["onClick"],fe={class:"size-box"},ge={class:"size-label"},he={style:{color:"#d5d5d5","font-size":"14px"}},ve={__name:"img_size",setup(f){const n=k(),_=[{ratio:"1:1",label:"1:1",size:"1024x1024"},{ratio:"4:3",label:"4:3",size:"1024x768"},{ratio:"3:4",label:"3:4",size:"768x1024"},{ratio:"16:9",label:"16:9",size:"1024x576"},{ratio:"9:16",label:"9:16",size:"576x1024"}],t=x(n.imgSize),a=V(()=>n.prompt.img_size),c=(p,r)=>{t.value=p,n.setImgSize(r)};M(()=>{n.initStore(),s()});function s(){const p=_.find(r=>r.size===n.imgSize);p&&(t.value=p.ratio)}return j(()=>n.imgSize,p=>{s()}),(p,r)=>(u(),h("div",null,[pe,i("div",ue,[(u(),h(b,null,z(_,(d,m)=>i("div",{key:m,class:"size-option"},[i("div",{class:I(["size-selector",{selected:t.value===d.ratio}]),onClick:y=>c(d.ratio,d.size)},[i("div",fe,[i("div",{class:I(["size-outline",`aspect-${d.ratio.replace(":","-")}`])},null,2)]),i("span",ge,w(d.label),1)],10,me)])),64))]),i("div",he,"当前图片尺寸: "+w(a.value),1)]))}},xe=S(ve,[["__scopeId","data-v-85df5fcb"]]),be={class:"style-label"},ye={class:"textarea-container"},Se={__name:"selections",setup(f){const n=k(),_={风格:["动漫","写真","赛博朋克","星际","日本漫画","水墨画风格","原创","风景画","插画","漫画","现代自然"],视角:["正面","侧面","背面","俯视","仰视","斜视","近景","远景","鸟瞰","虫视","局部","广角"],镜头:["近景","中景","远景","广角","微距","长焦","鱼眼","全景","特写","慢动作","快动作","定格"],灯光:["强光","弱光","无光","柔光","逆光","侧光","顶光","底光","散射光","聚光"],"色调/色彩":["冷色调","暖色调","黑白","高饱和度","低饱和度","单色","多彩","复古色调","霓虹色"],背景:["简约","复杂","空白","风景","城市","宇宙","科技风","自然风光","虚幻","未来城市","古代建筑","无背景"]},t=Q(Object.fromEntries(Object.keys(_).map(a=>[a,""])));return j(()=>({...t}),a=>{n.setPrompt({style:a.风格,view:a.视角,lens:a.镜头,light:a.灯光,color:a["色调/色彩"],background:a.背景})},{deep:!0}),(a,c)=>{const s=l("el-option"),p=l("el-select");return u(),h(b,null,[(u(),h(b,null,z(_,(r,d)=>i("div",{key:d,class:"style-selection"},[i("span",be,w(d),1),e(p,{modelValue:t[d],"onUpdate:modelValue":m=>t[d]=m,clearable:"",placeholder:"可选",size:"small"},{default:o(()=>[(u(!0),h(b,null,z(r,m=>(u(),$(s,{key:m,label:m,value:m},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64)),i("div",ye,[T(i("textarea",{placeholder:"输入提示词(必填)",class:"inputstyle","onUpdate:modelValue":c[0]||(c[0]=r=>g(n).prompt.prompt.context=r)},null,512),[[W,g(n).prompt.prompt.context]])])],64)}}},ze=S(Se,[["__scopeId","data-v-0951dcc8"]]),O={__name:"Text_to_Image",setup(f){return(n,_)=>(u(),h(b,null,[i("div",null,[e(xe)]),i("div",null,[e(ze)])],64))}},we={__name:"generateButton",emits:["draw"],setup(f,{emit:n}){const _=E(),t=k(),a=n,c=()=>{if(t.prompt.prompt.context){const s=JSON.stringify(t.prompt);_.setUser(s),console.log(s),_.sendMessage(!1),a("draw"),t.prompt.prompt.context="",t.setDrawer(!1)}};return(s,p)=>{const r=l("Promotion"),d=l("el-icon"),m=l("el-button");return u(),$(m,{type:g(t).prompt.prompt.context?"success":"",class:I(["generate-button",{disabled:!g(t).prompt.prompt.context}]),onClick:c,disabled:!g(t).prompt.prompt.context},{default:o(()=>[e(d,{style:{"font-size":"18px","margin-right":"5px"}},{default:o(()=>[e(r)]),_:1}),B("生成 ")]),_:1},8,["type","class","disabled"])}}},F=S(we,[["__scopeId","data-v-ad193a5f"]]),$e={__name:"model_settings",setup(f){const n=k(),_=x("btt"),t=x(550);return(a,c)=>{const s=l("el-header"),p=l("el-main"),r=l("el-footer"),d=l("el-container"),m=l("el-drawer");return u(),$(m,{modelValue:g(n).drawer,"onUpdate:modelValue":c[0]||(c[0]=y=>g(n).drawer=y),direction:_.value,size:t.value,"with-header":!1},{default:o(()=>[e(d,null,{default:o(()=>[e(s,{style:{display:"flex","justify-content":"center",padding:"0"}},{default:o(()=>[e(N)]),_:1}),e(p,{style:{display:"flex","flex-direction":"column",padding:"0 10px 0 10px","margin-top":"10px"}},{default:o(()=>[e(O)]),_:1}),e(r,{style:{padding:"10px",height:"40px"}},{default:o(()=>[e(F)]),_:1})]),_:1})]),_:1},8,["modelValue","direction","size"])}}},Ie={__name:"pc_settings",setup(f){return(n,_)=>{const t=l("el-header"),a=l("el-main"),c=l("el-footer"),s=l("el-container");return u(),$(s,null,{default:o(()=>[e(t,{style:{display:"flex","justify-content":"center",padding:"0"}},{default:o(()=>[e(N)]),_:1}),e(a,{style:{display:"flex","flex-direction":"column","margin-top":"10px"}},{default:o(()=>[e(O)]),_:1}),e(c,{style:{padding:"10px",height:"40px"}},{default:o(()=>[e(F)]),_:1})]),_:1})}}},ke={class:"assistant-container"},Ce=["src"],Me=["src"],De={class:"percentage-value"},Ae=i("span",{class:"percentage-label"},"生成图片中...",-1),Pe={style:{margin:"0"}},Ue=i("span",null,"下载",-1),Ve={__name:"assistant",props:{content:String,index:Number},emits:["deleteMessage"],setup(f,{emit:n}){const _=D(),t=f,a=x(null),c=V(()=>{try{return JSON.parse(t.content).images[0].url}catch(v){return console.error("解析内容失败:",v),null}}),s=x(0);let p;const r=()=>{if(c.value){const v=document.createElement("a");v.href=c.value,v.download="generated_image.png",document.body.appendChild(v),v.click(),document.body.removeChild(v),A.success("图片下载已开始")}else A.error("无法下载图片")},d=n,m=()=>{d("deleteMessage",t.index)};M(()=>{c.value||y()}),X(()=>{clearInterval(p)});const y=()=>{s.value=0,p=setInterval(()=>{s.value<100?s.value+=1:clearInterval(p)},100)};return(v,Ee)=>{const R=l("Delete"),C=l("el-icon"),L=l("MoreFilled"),J=l("el-popover"),q=l("el-card");return u(),h("div",ke,[i("img",{src:g(_).AIphoto,alt:"assistant",class:"assistantImg"},null,8,Ce),e(q,{class:"assistantCard"},{default:o(()=>[i("div",{ref_key:"contentRef",ref:a,class:"content-body"},[c.value?(u(),h("img",{key:0,src:c.value,alt:"生成的图片",class:"generated-image"},null,8,Me)):(u(),$(g(Y),{key:1,type:"circle",percentage:s.value,width:120},{default:o(({percentage:G})=>[i("span",De,w(10-Math.floor(G/10))+"s",1),Ae]),_:1},8,["percentage"]))],512),e(J,{placement:"right-end",trigger:"click","popper-class":"custom-popover"},{reference:o(()=>[e(C,{class:"MoreFilled"},{default:o(()=>[e(L)]),_:1})]),default:o(()=>[i("div",Pe,[i("p",{class:"custom-p",onClick:m},[e(C,{style:{width:"20px",margin:"6px"}},{default:o(()=>[e(R)]),_:1}),B(" 删除 ")]),i("p",{class:"custom-p",onClick:r},[e(C,{style:{width:"20px",margin:"6px"}},{default:o(()=>[e(g(Z))]),_:1}),Ue])])]),_:1})]),_:1})])}}},je={__name:"mainPart",setup(f){const{chatContainer:n,handleScroll:_}=oe(),t=D(),a=E(),c=s=>{a.messageList.splice(s,1)};return(s,p)=>(u(),h("div",{class:"chat-container",ref_key:"chatContainer",ref:n,onScroll:p[0]||(p[0]=(...r)=>g(_)&&g(_)(...r))},[e(ne,{content:g(t).prologue},null,8,["content"]),(u(!0),h(b,null,z(g(a).messageList,(r,d)=>(u(),h("div",{key:d},[e(ae,{content:r.user},null,8,["content"]),e(Ve,{content:r.assistant,index:d,onDeleteMessage:c},null,8,["content","index"])]))),128))],544))}},U=S(je,[["__scopeId","data-v-ef31167b"]]),Te={class:"common-layout"},Be={__name:"draw",setup(f){const n=x(!1),_=x(null),t=D();function a(){n.value=!n.value}function c(){console.log("开始绘图")}return M(async()=>{const s=await ee.get("/api/Draw/");t.setAImodel(s.data[0].title),t.setAIphoto(s.data[0].img),t.setUrl(s.data[0].url),t.setprologue(s.data[0].prologue)}),(s,p)=>{const r=l("el-aside"),d=l("el-header"),m=l("el-main"),y=l("el-footer"),v=l("el-container");return u(),h("div",Te,[e(v,null,{default:o(()=>[e(r,{class:"menu"},{default:o(()=>[e(P)]),_:1}),e(r,{class:"aside"},{default:o(()=>[e(Ie)]),_:1}),e(te,{name:"slide-fade"},{default:o(()=>[T(e(r,{class:"sidebar",ref_key:"sidebarRef",ref:_},{default:o(()=>[e(le,{onToggleSidebar:a})]),_:1},512),[[se,n.value]])]),_:1}),e(v,null,{default:o(()=>[e(d,{class:"headbar"},{default:o(()=>[e(ce,{onToggleSidebar:a})]),_:1}),e(m,{class:"pc_settings"},{default:o(()=>[e(U)]),_:1}),e(m,{class:"model_settings"},{default:o(()=>[e($e),e(U)]),_:1}),e(y,{class:"footbar"},{default:o(()=>[e(P,{onDraw:c})]),_:1})]),_:1})]),_:1})])}}},Fe=S(Be,[["__scopeId","data-v-18e7f7b5"]]);export{Fe as default};
